<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Events | Lou Gehrig Fan Club</title><meta name="description" content="Upcoming fan club events and other Lou Gehrig related events."><meta property="og:title" content="Events | Lou Gehrig Fan Club"><meta property="og:description" content="Upcoming fan club events and other Lou Gehrig related events."><meta property="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Events | Lou Gehrig Fan Club"><meta name="twitter:description" content="Upcoming fan club events and other Lou Gehrig related events."><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="stylesheet" href="/_astro/about.C72oy5zs.css"></head> <body class="font-sans text-gray-900">   <header class="border-b bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60"> <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between gap-4"> <a href="/" class="font-semibold">Lou Gehrig Fan Club</a> <nav class="flex flex-wrap items-center gap-4 text-sm"> <a class="hover:underline " href="/">Home</a> <a class="hover:underline  hidden" id="nav-club-home" href="/members/home">Club Home</a> <a class="hover:underline " href="/about">About</a> <a class="hover:underline" href="https://www.bonfire.com/store/lou-gehrig-fan-club/" target="_blank" rel="noreferrer">Club Store</a> <a class="hover:underline" href="https://linktr.ee/lougehrigfanclub" target="_blank" rel="noreferrer">Contact</a> <a class="hover:underline  hidden" id="nav-admin" href="/admin">Admin</a> <form action="/search" method="get" class="flex items-center gap-1"> <input name="q" placeholder="Search" class="border rounded px-2 py-1 h-8"> <button class="border rounded px-2 py-1 h-8">Go</button> </form> <a class="hover:underline " href="/login">Login</a> </nav> </div> </header> <script type="module">
        import { createClient } from 'https://esm.sh/@supabase/supabase-js@2';
        const SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;
        const SUPABASE_ANON_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY;
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
        (async () => {
          const { data } = await supabase.auth.getSession();
          const club = document.getElementById('nav-club-home');
          const admin = document.getElementById('nav-admin');
          if (data?.session) {
            club?.classList.remove('hidden');
            const { data: m } = await supabase
              .from('members')
              .select('is_admin')
              .eq('user_id', data.session.user.id)
              .limit(1)
              .maybeSingle();
            if (m?.is_admin) admin?.classList.remove('hidden');
          }
        })();
      </script> <main class="min-h-screen">  <section class="max-w-5xl mx-auto p-6"> <h1 class="text-3xl font-bold mb-4">Events</h1> <p class="text-gray-700 mb-6">Fan club events are listed first, followed by other Lou Gehrig related events. MLB Lou Gehrig Day is specially highlighted.</p> <h2 class="text-2xl font-semibold mt-6 mb-2">Club Events</h2> <div id="club-status" class="text-gray-600">Loading…</div> <ul id="club-list" class="space-y-3 mt-2"></ul> <h2 class="text-2xl font-semibold mt-8 mb-2">Other Events</h2> <div id="other-status" class="text-gray-600">Loading…</div> <ul id="other-list" class="space-y-3 mt-2"></ul> </section> <script type="module">
    import { createClient } from '@supabase/supabase-js';
    const SUPABASE_URL = import.meta.env.VITE_SUPABASE_URL;
    const SUPABASE_ANON_KEY = import.meta.env.VITE_SUPABASE_ANON_KEY;
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    const clubStatus = document.getElementById('club-status');
    const otherStatus = document.getElementById('other-status');
    const clubList = document.getElementById('club-list');
    const otherList = document.getElementById('other-list');

    function normalizeEvent(e) {
      return {
        id: e.id,
        title: e.title ?? e.name ?? 'Untitled Event',
        description: e.description ?? e.details ?? '',
        start_at: e.start_at ?? e.start_time ?? e.start ?? e.date ?? e.startDate ?? null,
        location: e.location ?? e.place ?? '',
        link_url: e.link_url ?? e.url ?? e.link ?? '',
        is_mlb_lou_gehrig_day: e.is_mlb_lou_gehrig_day ?? e.is_lg_day ?? e.is_lou_gehrig_day ?? false,
        is_club_event: e.is_club_event ?? e.club_event ?? e.is_club ?? false,
      };
    }

    function renderEvent(li, e) {
      const when = e.start_at ? new Date(e.start_at).toLocaleString() : '';
      const badge = e.is_mlb_lou_gehrig_day ? '<span class="ml-2 text-xs bg-red-600 text-white px-2 py-0.5 rounded">Lou Gehrig Day</span>' : '';
      li.className = 'border p-3 rounded bg-white';
      li.innerHTML = `
        <div class="flex items-center justify-between">
          <div>
            <div class="font-semibold">${e.title}${badge}</div>
            <div class="text-sm text-gray-600">${when}${e.location ? ` • ${e.location}` : ''}</div>
            ${e.description ? `<p class="mt-1 text-sm">${e.description}</p>` : ''}
          </div>
          ${e.link_url ? `<a class="text-blue-700 underline" href="${e.link_url}" target="_blank" rel="noreferrer">Details</a>` : ''}
        </div>
      `;
    }

    async function loadEvents() {
      try {
        const { data: all, error } = await supabase
          .from('events')
          .select('*')
          .order('start_at', { ascending: true })
          .limit(200);
        if (error) throw error;

        const normalized = (all ?? []).map(normalizeEvent);
        const club = normalized.filter(ev => ev.is_club_event);
        const other = normalized.filter(ev => !ev.is_club_event);

        if (!club.length) {
          clubStatus.textContent = 'No upcoming club events.';
        } else {
          clubStatus.remove();
          for (const ev of club) {
            const li = document.createElement('li');
            renderEvent(li, ev);
            clubList.appendChild(li);
          }
        }

        if (!other.length) {
          otherStatus.textContent = 'No other events found.';
        } else {
          otherStatus.remove();
          for (const ev of other) {
            const li = document.createElement('li');
            renderEvent(li, ev);
            otherList.appendChild(li);
          }
        }
      } catch (e) {
        clubStatus.textContent = `Error: ${e.message}`;
        otherStatus.textContent = `Error: ${e.message}`;
      }
    }

    loadEvents();
  </script>  </main> <footer class="border-t bg-gray-50"> <div class="max-w-6xl mx-auto px-4 py-6 text-sm text-gray-600 flex flex-wrap gap-4 items-center justify-between"> <p>&copy; 2025 Lou Gehrig Fan Club</p> <p>"Today I consider myself the luckiest man on the face of the earth."</p> </div> <div class="max-w-6xl mx-auto px-4 pb-8"> <nav class="flex flex-wrap gap-6 text-sm text-gray-700"> <a class="hover:underline" href="/privacy">Privacy Policy</a> <a class="hover:underline" href="/terms">Terms of Service</a> <a class="hover:underline" href="/community-guidelines">Community Guidelines</a> </nav> </div> </footer> </body></html>