<!DOCTYPE html><html lang="en"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Lou Gehrig Fan Club</title><meta name="description" content="Honoring the legacy of Lou Gehrig while raising awareness and support for ALS research."><meta property="og:title" content="Lou Gehrig Fan Club"><meta property="og:description" content="Honoring the legacy of Lou Gehrig while raising awareness and support for ALS research."><meta property="og:type" content="website"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Lou Gehrig Fan Club"><meta name="twitter:description" content="Honoring the legacy of Lou Gehrig while raising awareness and support for ALS research."><link rel="icon" href="/favicon.svg" type="image/svg+xml"><link rel="stylesheet" href="/_astro/about.BXozTdcV.css"></head> <body class="font-sans text-gray-900">  <header class="border-b bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60"> <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between"> <a href="/" class="font-semibold">Lou Gehrig Fan Club</a> <nav class="flex flex-wrap gap-4 text-sm"> <a class="hover:underline " href="/milestones">Milestones</a> <a class="hover:underline " href="/events">Events</a> <a class="hover:underline " href="/archive">Archive</a> <a class="hover:underline " href="/community">Community</a> <a class="hover:underline " href="/qa">Q&A</a> <a class="hover:underline " href="/search">Search</a> <a class="hover:underline " href="/about">About</a> <a class="hover:underline " href="/contribute">Contribute</a> <a class="hover:underline " href="/my-submissions">My Submissions</a> <a class="hover:underline " href="/admin">Admin</a> <a class="hover:underline" href="https://www.bonfire.com/store/lou-gehrig-fan-club/" target="_blank" rel="noreferrer">Shop</a> <a class="hover:underline" href="https://linktr.ee/lougehrigfanclub" target="_blank" rel="noreferrer">Linktree</a> <a class="hover:underline " href="/login">Login</a> </nav> </div> </header> <main class="min-h-screen">  <section class="text-center p-8"> <h1 class="text-4xl font-bold mb-4">Welcome to the Lou Gehrig Fan Club</h1> <p class="max-w-xl mx-auto mb-6">
Honoring the legacy of Lou Gehrig while raising awareness and support for ALS research.
</p> </section> <section class="max-w-4xl mx-auto p-6"> <h2 class="text-2xl font-semibold mb-3">Daily Picture Vote</h2> <p class="text-gray-600 mb-4">Vote for your favorite image. Winners advance daily until we crown the best picture.</p> <div id="vote" class="grid gap-4 md:grid-cols-2"></div> <p id="vote-status" class="text-sm text-gray-600 mt-3"></p> </section> <script type="module">
    import { createClient } from '@supabase/supabase-js';
    const supabase = createClient(import.meta.env.VITE_SUPABASE_URL, import.meta.env.VITE_SUPABASE_ANON_KEY);

    const voteEl = document.getElementById('vote');
    const voteStatus = document.getElementById('vote-status');

    function normalize(m) {
      return {
        id: m.id,
        url: m.media_url ?? m.url,
        alt: m.alt_text ?? m.file_name ?? 'Photo'
      };
    }

    async function getTwoRandomImages() {
      const { data, error } = await supabase
        .from('media_files')
        .select('*')
        .eq('media_type', 'image')
        .order('random')
        .limit(2);
      if (error) throw error;
      return (data ?? []).map(normalize);
    }

    async function ensureAuthOrPrompt() {
      const { data } = await supabase.auth.getSession();
      if (!data?.session) {
        window.location.href = `/login?redirect=${encodeURIComponent('/')}`;
        return null;
      }
      return data.session;
    }

    async function recordVote(imageId) {
      const session = await ensureAuthOrPrompt();
      if (!session) return;
      const { error } = await supabase
        .from('picture_votes')
        .insert({ image_id: imageId, user_id: session.user.id });
      voteStatus.textContent = error ? `Vote failed: ${error.message}` : 'Thanks for voting!';
      if (!error) loadRound();
    }

    function renderPair([a, b]) {
      voteEl.innerHTML = '';
      for (const img of [a, b]) {
        const btn = document.createElement('button');
        btn.className = 'block border rounded overflow-hidden bg-white hover:shadow focus:outline-blue-600';
        btn.innerHTML = `
          <img src="${img.url}" alt="${img.alt}" class="w-full h-64 object-cover" loading="lazy" />
          <div class="p-3 text-center font-medium">Vote</div>
        `;
        btn.addEventListener('click', () => recordVote(img.id));
        voteEl.appendChild(btn);
      }
    }

    async function loadRound() {
      voteStatus.textContent = 'Loading picturesâ€¦';
      try {
        const pair = await getTwoRandomImages();
        if (pair.length < 2) {
          voteStatus.textContent = 'Not enough images to vote yet.';
          return;
        }
        renderPair(pair);
        voteStatus.textContent = '';
      } catch (e) {
        voteStatus.textContent = `Error: ${e.message}`;
      }
    }

    loadRound();
  </script>  </main> <footer class="border-t bg-gray-50"> <div class="max-w-6xl mx-auto px-4 py-6 text-sm text-gray-600 flex flex-wrap gap-4 items-center justify-between"> <p>&copy; 2025 Lou Gehrig Fan Club</p> <p>
"Today I consider myself the luckiest man on the face of the earth."
</p> </div> </footer> </body></html>